<div class="container">
  <h1>{{ title }}</h1>

  {% if message %}
  <p>{{ message }}</p>
  {% endif %} {% if election_results %}
  <table style="border-collapse: collapse; width: 100%; margin-top: 20px">
    <thead>
      <tr>
        <th style="border: 2px solid black; padding: 8px">#</th>
        <th style="border: 2px solid black; padding: 8px">Candidate Name</th>
        <th style="border: 2px solid black; padding: 8px">Total Votes</th>
        <th style="border: 2px solid black; padding: 8px">Election Date</th>
      </tr>
    </thead>
    <tbody>
      {% for election, data in election_results.items %}
      <tr>
        <td
          colspan="4"
          style="
            border: 2px solid black;
            padding: 8px;
            font-weight: bold;
            text-align: center;
          "
        >
          <strong>Election: {{ election.name }}</strong>
        </td>
      </tr>

      {% for seat, results in data.results.items %}
      <tr>
        <td
          colspan="4"
          style="
            border: 2px solid black;
            padding: 8px;
            font-weight: bold;
            background-color: #f2f2f2;
            text-align: center;
          "
        >
          <strong>Seat: {{ seat }}</strong>
        </td>
      </tr>

      {% if results %} {% for result in results %}
      <tr>
        <td style="border: 2px solid black; padding: 8px">
          {{ forloop.counter }}
        </td>
        <td style="border: 2px solid black; padding: 8px">
          {{ result.candidate__first_name }} {{ result.candidate__last_name }}
        </td>
        <td style="border: 2px solid black; padding: 8px">
          {{ result.total_votes }}
        </td>
        <td style="border: 2px solid black; padding: 8px">
          {{ election.date }}
        </td>
      </tr>
      {% endfor %} {% else %}
      <tr>
        <td
          colspan="4"
          style="border: 2px solid black; padding: 8px; text-align: center"
        >
          No candidates for this seat.
        </td>
      </tr>
      {% endif %} {% endfor %} {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No election results available.</p>
  {% endif %}
</div>
